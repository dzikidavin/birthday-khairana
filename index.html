<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy 22nd Khairana üéâ</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    font-family: 'Courier New', monospace;
    background: linear-gradient(120deg, #ffd6e8, #ffecc7, #dbeafe);
    background-size: 300% 300%;
    animation: bgMove 15s ease infinite;
  }
  @keyframes bgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  #gameContainer { position: relative; width: 100vw; height: 100vh; }

  #player {
    position: absolute;
    bottom: 50px;
    left: 50%;
    width: 40px;
    height: 40px;
    background: #ff4d6d;
    border-radius: 4px;
    transform: translateX(-50%);
    transition: left 0.05s linear;
  }

  .item {
    position: absolute;
    font-size: 28px;
    cursor: pointer;
    user-select: none;
  }

  #scoreboard {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
    font-weight: bold;
    color: #ff4d6d;
  }

  #message {
    position: absolute;
    bottom: 120px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 18px;
    color: #ff4d6d;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  #cakeContainer {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    animation: cakeBounce 1s ease infinite alternate;
  }

  @keyframes cakeBounce {
    from { transform: translate(-50%, -50%) scale(1); }
    to { transform: translate(-50%, -52%) scale(1.05); }
  }

  #cake {
    font-size: 80px;
    cursor: pointer;
    position: relative;
    display: inline-block;
  }

  .flame {
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
    animation: flicker 0.2s infinite alternate;
  }

  @keyframes flicker {
    from { transform: translateX(-50%) scaleY(1); opacity:1; }
    to { transform: translateX(-50%) scaleY(1.3); opacity:0.8; }
  }

  #victory {
    display: none;
    width: 90%;
    max-width: 400px;
    background: rgba(255,255,255,0.95);
    padding: 25px;
    border-radius: 25px;
    backdrop-filter: blur(10px);
    text-align: center;
    font-size: 18px;
    color: #333;
    animation: fadeIn 1s ease;
  }

  .confetti {
    position: absolute;
    width: 8px;
    height: 8px;
    pointer-events: none;
    animation: confettiFall linear infinite;
  }

  @keyframes confettiFall {
    0% { transform: translateY(0) rotate(0deg); opacity:1; }
    100% { transform: translateY(100vh) rotate(360deg); opacity:0; }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>
<div id="gameContainer">
  <div id="player"></div>
  <div id="scoreboard">Collected: 0 / 25</div>
  <div id="message">üéâ Nice catch!</div>

  <div id="cakeContainer">
    <div id="cake">üéÇ<div class="flame">üî•</div></div>
    <p>Click the cake to make a wish!</p>
  </div>

  <div id="victory">
    <p>
      I‚Äôm not great at writing things like this,<br>
      but I didn‚Äôt want your birthday<br>
      to pass without me saying something properly.
    </p>
    <p>
      I really enjoy talking to you,<br>
      and I like the person you are.<br>
      That‚Äôs honestly it ‚Äî and yes, you make me smile üòè
    </p>
    <p>
      I hope being 22 brings you<br>
      good days, calm moments,<br>
      and things that make you happy<br>
      without having to try too hard.
    </p>
    <p>
      Happy birthday, Khairana ü§ç<br>
      Have an amazing one.
    </p>
  </div>
</div>

<!-- Sounds -->
<audio id="collectSound" src="https://freesound.org/data/previews/82/82921_1022651-lq.mp3"></audio>
<audio id="victorySound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>
<audio id="wishSound" src="https://freesound.org/data/previews/342/342756_3248244-lq.mp3"></audio>

<script>
const player = document.getElementById('player');
const container = document.getElementById('gameContainer');
const scoreboard = document.getElementById('scoreboard');
const message = document.getElementById('message');
const cakeContainer = document.getElementById('cakeContainer');
const cake = document.getElementById('cake');
const flame = cake.querySelector('.flame');
const victory = document.getElementById('victory');

const collectSound = document.getElementById('collectSound');
const victorySound = document.getElementById('victorySound');
const wishSound = document.getElementById('wishSound');

let collected = 0;
const totalItems = 25;
const itemsArray = ["üíñ","‚ú®","üå∏","‚≠ê","üéà","üí´","üå∑"];
const activeItems = [];

function randomPosition() {
  const x = Math.random() * (window.innerWidth - 40);
  const y = Math.random() * (window.innerHeight - 150);
  return {x, y};
}

function spawnItem() {
  const item = document.createElement('div');
  item.className = 'item';
  item.innerText = itemsArray[Math.floor(Math.random() * itemsArray.length)];
  const pos = randomPosition();
  item.style.left = pos.x + 'px';
  item.style.top = pos.y + 'px';
  container.appendChild(item);
  activeItems.push(item);

  let direction = Math.random() > 0.5 ? 1 : -1;
  setInterval(() => {
    if(!item.parentNode) return;
    let currentTop = parseFloat(item.style.top);
    item.style.top = currentTop + direction * 0.5 + "px";
    if(currentTop > pos.y + 30 || currentTop < pos.y - 30) direction *= -1;
  }, 50);

  item.addEventListener('click', () => {
    collected++;
    scoreboard.innerText = `Collected: ${collected} / ${totalItems}`;
    showMessage(randomMessage());
    spawnConfetti(item.offsetLeft, item.offsetTop);
    collectSound.currentTime = 0;
    collectSound.play();
    item.remove();
    if (collected >= totalItems) showCake();
  });
}

function randomMessage() {
  const msgs = ["Caught my heart üòè", "Level up my love üíñ", "You're sparkling ‚ú®", "Nice catch üå∏", "So fast! üòé"];
  return msgs[Math.floor(Math.random() * msgs.length)];
}

function showMessage(text) {
  message.innerText = text;
  message.style.opacity = 1;
  setTimeout(() => { message.style.opacity = 0; }, 1000);
}

function spawnConfetti(x, y) {
  for(let i=0;i<15;i++){
    const conf = document.createElement('div');
    conf.className = 'confetti';
    conf.style.left = (x + Math.random()*30) + 'px';
    conf.style.top = (y + Math.random()*30) + 'px';
    conf.style.width = (5 + Math.random()*8) + 'px';
    conf.style.height = conf.style.width;
    conf.style.background = ['#ff4d6d','#ffbaba','#ffe7c7','#dbeafe','#ffd6e8','#ffe066'][Math.floor(Math.random()*6)];
    conf.style.animationDuration = (1 + Math.random()*2)+'s';
    container.appendChild(conf);
    setTimeout(()=> conf.remove(), 2500);
  }
}

function showCake() {
  cakeContainer.style.display = 'block';
  victorySound.currentTime = 0;
  victorySound.play();
}

// Tiup lilin
cake.addEventListener('click', () => {
  flame.style.display = 'none'; // lilin padam
  spawnConfetti(window.innerWidth/2, window.innerHeight/2);
  wishSound.currentTime = 0;
  wishSound.play();
  setTimeout(() => {
    cakeContainer.style.display = 'none';
    victory.style.display = 'block';
  }, 500);
});

// Spawn items
for(let i=0;i<totalItems;i++) spawnItem();

// Player movement
let posX = window.innerWidth/2;
document.addEventListener('keydown', (e) => {
  const step = 15;
  if(e.key === 'ArrowLeft') posX -= step;
  if(e.key === 'ArrowRight') posX += step;
  if(posX < 0) posX = 0;
  if(posX > window.innerWidth-40) posX = window.innerWidth-40;
  player.style.left = posX + 'px';
});
</script>
</body>
</html>
