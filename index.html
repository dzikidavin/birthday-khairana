<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday, Khairana</title>
<style>
body {
  margin:0; overflow:hidden; font-family: 'Courier New', monospace;
  background: linear-gradient(120deg,#ffd6e8,#ffecc7,#dbeafe);
  background-size:300% 300%; animation:bgMove 15s ease infinite;
}
@keyframes bgMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

#startScreen {
  position:absolute;top:0;left:0;width:100%;height:100%;
  display:flex;flex-direction:column;justify-content:center;align-items:center;
  background: rgba(255,255,255,0.95);backdrop-filter: blur(12px);text-align:center; z-index:100;
}
#startScreen button {
  padding:14px 28px;font-size:18px;border:none;border-radius:22px;
  background:#6a6eff;color:white;cursor:pointer;margin-top:20px;
}
#startScreen button:hover{transform:scale(1.05)}

#gameContainer{position:relative;width:100vw;height:100vh;overflow:hidden;}
.item{
  position:absolute; font-size:28px; cursor:pointer; user-select:none; z-index:40;
  transition: transform 0.1s linear;
}
#scoreboard{position:absolute;top:10px;left:50%;transform:translateX(-50%);font-size:20px;font-weight:bold;color:#6a6eff;z-index:50;}
#message{position:absolute;top:40px;left:50%;transform:translateX(-50%);font-size:18px;color:#6a6eff;font-weight:bold;opacity:0;transition:opacity 0.3s ease;z-index:50;}

#cakeWrapper{
  display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  text-align:center; z-index:60;
}
#cake{font-size:80px;cursor:pointer;position:relative;animation:bounce 1s ease infinite alternate;}
.flame{position:absolute;top:-25px;left:50%;transform:translateX(-50%);font-size:20px;animation:flicker 0.1s infinite alternate;}
@keyframes flicker{
  0%{transform:translateX(-50%) scaleY(1);opacity:1;}
  25%{transform:translateX(-50%) scaleY(1.3);opacity:0.9;}
  50%{transform:translateX(-50%) scaleY(1.1);opacity:1;}
  75%{transform:translateX(-50%) scaleY(1.25);opacity:0.85;}
  100%{transform:translateX(-50%) scaleY(1);opacity:1;}
}
@keyframes bounce{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}

#cakeWrapper p{
  margin-top:12px; font-size:18px; color:#6a6eff; text-align:center;
}

#victory{
  display:none; width:90%; max-width:480px; position:absolute;
  top:50%; left:50%; transform:translate(-50%,-50%);
  background:rgba(255,255,255,0.96);
  padding:28px;border-radius:20px;backdrop-filter:blur(10px);
  text-align:center;font-size:18px;color:#333; z-index:70;
}
.confetti{position:absolute;width:8px;height:8px;pointer-events:none;animation:fall 2s linear forwards;}
@keyframes fall{to{transform:translateY(100vh) rotate(360deg);opacity:0}}
</style>
</head>
<body>
<div id="gameContainer">

  <!-- Start Screen -->
  <div id="startScreen">
    <h1>Happy Birthday, Khairana!</h1>
    <p>Click Start to play your mini birthday game!</p>
    <button id="startBtn">Start!</button>
  </div>

  <!-- Scoreboard -->
  <div id="scoreboard">Collected: 0 / 15</div>
  <div id="message">Nice!</div>

  <!-- Cake -->
  <div id="cakeWrapper">
    <div id="cake">üéÇ<div class="flame">üî•</div></div>
    <p>Click the cake to make a wish!</p>
  </div>

  <!-- Birthday Message -->
  <div id="victory">
    <p>Hi Khairana!</p>
    <p>I really enjoy talking to you,
    <br>and I like you just the way you are.</p>
    <p>I hope being 22 brings you
    <br>good days, calm moments,
    <br>and things that make you happy without trying too hard.
    <br>may this year bless you with health, joy, and everything your heart wishes for.</p>
    <p>Happy birthday, Khairana ü§ç.
    <br>Have an amazing one!</p>
  </div>

</div>

<!-- Audio -->
<audio id="collectSound" src="https://opengameart.org/sites/default/files/coin.ogg"></audio>
<audio id="blowSound" src="https://pixabay.com/sound-effects/blow-out-the-candle-381892/"></audio>

<script>
// Elements
const startBtn = document.getElementById('startBtn');
const startScreen = document.getElementById('startScreen');
const container = document.getElementById('gameContainer');
const scoreboard = document.getElementById('scoreboard');
const message = document.getElementById('message');
const cakeWrapper = document.getElementById('cakeWrapper');
const cake = document.getElementById('cake');
const flame = cake.querySelector('.flame');
const victory = document.getElementById('victory');

const collectSound = document.getElementById('collectSound');
const blowSound = document.getElementById('blowSound');

// Game variables
let collected = 0;
const totalItems = 15;
const itemsArray = ["üíñ","‚ú®","üå∏","‚≠ê","üéà","üí´","üå∑"];
const itemElements = [];

// Start game
startBtn.onclick=()=>{
  startScreen.style.display='none';
  spawnItems();
  requestAnimationFrame(gameLoop);
};

// Spawn moving items
function spawnItems(){
  for(let i=0;i<totalItems;i++){
    const itm=document.createElement('div');
    itm.className='item';
    itm.innerText=itemsArray[Math.floor(Math.random()* itemsArray.length)];
    itm.style.left=Math.random()*(window.innerWidth-40)+'px';
    itm.style.top=Math.random()*(window.innerHeight-200)+'px';
    itm.dataset.vx=(Math.random()*2-1)*2;
    itm.dataset.vy=(Math.random()*2-1)*2;
    itm.dataset.rotate=(Math.random()*2-1)*5;
    container.appendChild(itm);
    itemElements.push(itm);

    itm.onclick = ()=>{
      collected++;
      scoreboard.innerText=`Collected: ${collected} / ${totalItems}`;
      message.style.opacity=1;
      setTimeout(()=>message.style.opacity=0,900);
      collectSound.currentTime=0; collectSound.play();

      // Confetti sparkle
      for(let j=0;j<24;j++){
        const conf=document.createElement('div');
        conf.className='confetti';
        conf.style.left=(parseFloat(itm.style.left)+Math.random()*30)+'px';
        conf.style.top=(parseFloat(itm.style.top)+Math.random()*30)+'px';
        conf.style.background=['#6a6eff','#ffe066','#ffd6e8','#dbeafe','#ff7aa2','#ffdf7a'][Math.floor(Math.random()*6)];
        container.appendChild(conf);
        setTimeout(()=>conf.remove(),2500);
      }

      itm.remove();

      if(collected>=totalItems){
        scoreboard.style.display='none';
        itemElements.forEach(itm=>itm.remove());
        cakeWrapper.style.opacity=0;
        cakeWrapper.style.display='block';
        setTimeout(()=>{cakeWrapper.style.opacity=1},50);
      }
    };
  }
}

// Game loop - move items
function gameLoop(){
  itemElements.forEach(itm=>{
    if(!itm.parentElement) return;
    let x = parseFloat(itm.style.left);
    let y = parseFloat(itm.style.top);
    let vx = parseFloat(itm.dataset.vx);
    let vy = parseFloat(itm.dataset.vy);
    let r = parseFloat(itm.dataset.rotate);

    x += vx; y += vy;
    if(x<0||x>window.innerWidth-40) vx*=-1;
    if(y<0||y>window.innerHeight-100) vy*=-1;

    itm.style.left = x+'px';
    itm.style.top = y+'px';
    itm.style.transform = `rotate(${r}deg)`;
    itm.dataset.vx = vx;
    itm.dataset.vy = vy;
    itm.dataset.rotate = r + 2;
  });
  requestAnimationFrame(gameLoop);
}

// Cake click
cake.onclick=()=>{
  flame.style.display='none';
  blowSound.volume=0.4;
  blowSound.play().catch(err=>console.log(err));

  // Confetti ekstra saat cake
  for(let j=0;j<50;j++){
    const conf=document.createElement('div');
    conf.className='confetti';
    conf.style.left=(window.innerWidth*Math.random())+'px';
    conf.style.top=(window.innerHeight*Math.random()*0.5)+'px';
    conf.style.background=['#6a6eff','#ffe066','#ffd6e8','#dbeafe','#ff7aa2','#ffdf7a'][Math.floor(Math.random()*6)];
    container.appendChild(conf);
    setTimeout(()=>conf.remove(),3000);
  }

  // Hilangkan cake, tampilkan pesan
  setTimeout(()=>{
    cakeWrapper.style.display='none';
    victory.style.display='block';
  },500);
};
</script>
</body>
</html>
